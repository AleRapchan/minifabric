# Dockerfile for hyperledger minifabric
#
# @see https://github.com/litong01/minifabric
#
FROM alpine/git AS BUILD

RUN cd /tmp && git init minifabric && cd minifabric                && \
    git remote add origin https://github.com/litong01/minifabric   && \
    git pull --depth=1 origin master

FROM docker:latest
RUN apk add bash ansible python3
ADD https://raw.githubusercontent.com/dlitz/pycrypto/master/lib/Crypto/Random/Fortuna/FortunaGenerator.py \
    /usr/lib/python3.8/site-packages/Crypto/Random/Fortuna/FortunaGenerator.py

COPY --from=build /tmp/minifabric ./home
ENV PATH $PATH:/home/bin
WORKDIR /home
